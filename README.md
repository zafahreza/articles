# Simple Articles Web Service

This web services was build using Command and Query Responsibility Segregation (CQRS) patern. There are two endpoint served by two applications, Articles-post-app and Articles-get-app.


## Architecture

- Nginx used for reverse proxy
- Post-App used to serve post article
- Get-APP used to serve get articles
- RabbitMQ used as message broker
- PostgreSQL used to store data from Post-App
- Elasticsearch used to query data for user request
- Redis used to cache data

![architecture](https://storage.googleapis.com/donation_alert/cqrs.png)

## Installation

1. clone this repository `git clone https://github.com/zafahreza/articles.git`
2. go to cloned repository
3. start docker-compose `docker-compose up -d`
4. wait until all container running properly

## Hit Endpoint

There are two endpoint POST /articles and GET /articles

- POST /articles
  
    Url : `http://localhost:80/articles`
  
Request body :
``` 
{ 
	"author" : "test",
	"title" : "this is title",
	"body" : "this a body of article"
}
```

Response Body :
```
{
	"status": "success",
	"code": 200,
	"data": {
		"id": 1,
		"author": "test",
		"title": "this is title",
		"body": "this a body of article",
		"created_at": "2023-01-29T09:55:03.389687274Z"
	}
}
```

Id and CreatedAt will auto generated by system

- GET /articles

This endpoint can use parameter query and author to filter search result. The result will be sorted with newest first
  
Url : `http://localhost:80/articles` (no parameter)

Url : `http://localhost:80/articles?author=example` (author parameter)
  
Url : `http://localhost:80/articles?query=example` (query parameter)
  
Url : `http://localhost:80/articles?author=example&query=example` (author and query parameter)
  
Method: GET
  
No request body required
  
Response Body :
 ```
{
	"status": "success",
	"code": 200,
	"data": [
			{
				"id": 2,
				"author": "test",
				"title": "this is title",
				"body": "this a body of article",
				"created_at": "2023-01-29T09:55:03.389687274Z"
			},
			{
				"id": 1,
				"author": "test",
				"title": "this is title",
				"body": "this a body of article",
				"created_at": "2023-01-29T09:55:03.389687274Z"
			},
	]
}
```
 